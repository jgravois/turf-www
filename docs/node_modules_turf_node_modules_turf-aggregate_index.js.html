<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>turf: Source: node_modules/turf/node_modules/turf-aggregate/index.js</title>
    <link href='https://www.mapbox.com/base/latest/base.css' rel='stylesheet' />
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/rpl-www.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body class=''>
<div class='col8 margin2 clearfix'>
    <div class='col3'>
        <img src='/assets/logo.png' />
        <div class='pad1 space-top0'>
            <h3></h3><ul><li><a href="module-turf_aggregate.html">aggregate</a></li><li><a href="module-turf_average.html">average</a></li><li><a href="module-turf_bbox-polygon.html">bbox-polygon</a></li><li><a href="module-turf_bearing.html">bearing</a></li><li><a href="module-turf_bezier.html">bezier</a></li><li><a href="module-turf_buffer.html">buffer</a></li><li><a href="module-turf_center.html">center</a></li><li><a href="module-turf_centroid.html">centroid</a></li><li><a href="module-turf_combine.html">combine</a></li><li><a href="module-turf_concave.html">concave</a></li><li><a href="module-turf_convex.html">convex</a></li><li><a href="module-turf_count.html">count</a></li><li><a href="module-turf_destination.html">destination</a></li><li><a href="module-turf_deviation.html">deviation</a></li><li><a href="module-turf_distance.html">distance</a></li><li><a href="module-turf_envelope.html">envelope</a></li><li><a href="module-turf_explode.html">explode</a></li><li><a href="module-turf_extent.html">extent</a></li><li><a href="module-turf_featurecollection.html">featurecollection</a></li><li><a href="module-turf_flip.html">flip</a></li><li><a href="module-turf_grid.html">grid</a></li><li><a href="module-turf_hex.html">hex</a></li><li><a href="module-turf_isobands.html">isobands</a></li><li><a href="module-turf_isolines.html">isolines</a></li><li><a href="module-turf_kinks.html">kinks</a></li><li><a href="module-turf_linestring.html">linestring</a></li><li><a href="module-turf_nearest.html">nearest</a></li><li><a href="module-turf_point.html">point</a></li><li><a href="module-turf_pointOnSurface.html">pointOnSurface</a></li><li><a href="module-turf_polygon.html">polygon</a></li><li><a href="module-turf_sample.html">sample</a></li><li><a href="module-turf_simplify.html">simplify</a></li><li><a href="module-turf_tin.html">tin</a></li></ul><div class="quiet"><h4 class="space-top1">Types</h4><ul><li class="small"><a href="global.html#Feature">Feature</a></li><li class="small"><a href="global.html#FeatureCollection">FeatureCollection</a></li><li class="small"><a href="global.html#GeoJSON">GeoJSON</a></li><li class="small"><a href="global.html#GeometryCollection">GeometryCollection</a></li><li class="small"><a href="global.html#LineString">LineString</a></li><li class="small"><a href="global.html#MultiLineString">MultiLineString</a></li><li class="small"><a href="global.html#MultiPoint">MultiPoint</a></li><li class="small"><a href="global.html#MultiPolygon">MultiPolygon</a></li><li class="small"><a href="global.html#Point">Point</a></li><li class="small"><a href="global.html#Polygon">Polygon</a></li></ul></div>
        </div>
    </div>
    <div class='pad1y pad2x col9 fill-white'>
        <div class='prose'>
            <h2>Source: node_modules/turf/node_modules/turf-aggregate/index.js</h2>
            



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>var average = require('turf-average');
var sum = require('turf-sum');
var median = require('turf-median');
var min = require('turf-min');
var max = require('turf-max');
var deviation = require('turf-deviation');
var variance = require('turf-variance');
var count = require('turf-count');
var operations = {};
operations.average = average;
operations.sum = sum;
operations.median = median;
operations.min = min;
operations.max = max;
operations.deviation = deviation;
operations.variance = variance;
operations.count = count;

/**
* Takes a set of polygons, a set of points, and an array of aggregations, then performs them. Sum, average, count, min, max, and deviation are supported.
*
* @module turf/aggregate
* @param {FeatureCollection} polygonFC - a GeoJSON FeatureCollection containing Polygons
* @param {FeatureCollection} pointFC - a FeatureCollection containing Points
* @param {Array} aggregations - an array of aggregation objects
* @return {FeatureCollection} polys - a FeatureCollection containing polygons with specified aggregation statistics as attributes
* @example
* var polygons = turf.featurecollection([
*   turf.polygon([[[0,0],[10,0],[10,10],[0,10],[0,0]]]),
*   turf.polygon([[[10,0],[20,10],[20,20], [20,0]]])]);
* var points = turf.featurecollection([
*   turf.point(5,5, {population: 200}),
*   turf.point(1,3, {population: 600}),
*   turf.point(14,2, {population: 100}),
*   turf.point(13,1, {population: 200}),
*   turf.point(19,7, {population: 300})]);
* var aggregations = [
*   {
*     aggregation: 'sum',
*     inField: 'population',
*     outField: 'pop_sum'
*   },
*   {
*     aggregation: 'average',
*     inField: 'population',
*     outField: 'pop_avg'
*   },
*   {
*     aggregation: 'median',
*     inField: 'population',
*     outField: 'pop_median'
*   },
*   {
*     aggregation: 'min',
*     inField: 'population',
*     outField: 'pop_min'
*   },
*   {
*     aggregation: 'max',
*     inField: 'population',
*     outField: 'pop_max'
*   },
*   {
*     aggregation: 'deviation',
*     inField: 'population',
*     outField: 'pop_deviation'
*   },
*   {
*     aggregation: 'variance',
*     inField: 'population',
*     outField: 'pop_variance'
*   },
*   {
*     aggregation: 'count',
*     inField: '',
*     outField: 'point_count'
*   }
* ];
*
* var aggregated = turf.aggregate(polygons, points, aggregations);
* 
* //=aggregated
*/

module.exports = function(polygons, points, aggregations){
  for (var i = 0, len = aggregations.length; i &lt; len; i++) {
    var agg = aggregations[i],
      operation = agg.aggregation,
      unrecognizedError;

    if (isAggregationOperation(operation)) {
      if (operation === 'count') {
        polygons = operations[operation](polygons, points, agg.outField);
      } else {
        polygons = operations[operation](polygons, points, agg.inField, agg.outField);
      }
    } else {
      return new Error('"'+ operation +'" is not a recognized aggregation operation.');
    }
  }

  return polygons;
}

function isAggregationOperation(operation) {
  return operation === 'average' ||
    operation === 'sum' ||
    operation === 'median' ||
    operation === 'min' ||
    operation === 'max' ||
    operation === 'deviation' ||
    operation === 'variance' ||
    operation === 'count';
}
</code></pre>
        </article>
    </section>




        </div>
    </div>
</div>
<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
<script src="scripts/run.js"> </script>
</body>
</html>
